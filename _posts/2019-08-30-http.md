---
layout: post
title: http详解
subtitle: How net work
author: "malin"
header-bg-css: "linear-gradient(to right, #5cadff, #09EF46);"
tags:
  - ubuntu
  - node
---

> 从输入URL到页面渲染干了啥？

## 域名解析

- 从缓存中找域名缓存，没有的话去本机hosts文件里面找。
- 如果还没有去LDNS本地域名服务器
- 没找到直接到根域名服务器，根域名服务器返回主域名服务器地址
- 向主域名服务器发出请求，主域名服务器返回 Name Server域名服务器地址（阿里DNS，腾讯DNS）
- 向Name Server服务器发出请求，返回IP和TTL缓存时间，缓存到本地DNS服务器
- 把解析结果返回来，TTL决定缓存时间，缓存到本地

## HTTP请求到响应

- 表示层，会话层 拿到IP+端口，http默认80，https默认443，发起http请求 会话
- 传输层三次握手建立TCP连接，提供可靠的连接
- 网络层 通过ARP寻址得到接收方的MAC地址
- 链路层，服务器接收到数据，请求阶段完成
- 应用层，将数据传输到应用程序处理报文
- 将处理后的数据返回response
- 如果成功，则拿到资源

## 页面渲染

- HTML parser 解析 HTML -> DOM树
- CSS parser 解析 CSS -> CSSOM
- js解析 混进 DOM CSSOM
- 生成Render Tree
- 回流  重绘

## 性能优化

- 打包分包
- CDN
- css 选择器
- 压缩文件
