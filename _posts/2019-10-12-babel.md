---
layout:     post
title:      "å¦‚ä½•ä½¿ç”¨ babel@7 + core-js@3 åšæµè§ˆå™¨å…¼å®¹"
date:       2019-10-12 10ç‚¹24åˆ†
author:     "malin"
header-style: text
tags:
    - babel
---

`Babel` å¯ä»¥å°† `ES6+` è¯­æ³•è½¬è¯‘æˆ `ES5` çš„è¯­æ³•ï¼Œä»è€Œä½¿æµè§ˆå™¨èƒ½å¤Ÿè§£æã€‚å¦‚ä»Šå·²å‡çº§è‡³`7+` [ä¸­æ–‡å®˜æ–¹æ–‡æ¡£](https://www.babeljs.cn/docs/)  
`core-js` æœ¬æ¥æ˜¯é›†æˆåœ¨ `@babel/polyfill` ä¸­çš„ï¼Œä½†æ˜¯ä» `Babel 7.4.0` å¼€å§‹ `@babel/polyfill` å·²ç»ä¸æ¨èä½¿ç”¨ğŸš«[ç›¸å…³é“¾æ¥](https://babeljs.io/docs/en/babel-polyfill#docsNav)ã€‚`Babel`å®˜æ–¹æ¨èå•ç‹¬å¼•å…¥ `core-js/stable` `regenerator-runtime/runtime`è¿™ä¸¤ä¸ªåŒ…åš`polyfill`  

**æ³¨æ„ï¼š**

> é€šå¸¸`core-js`åªéœ€è¦åœ¨å…¥å£å·¥ç¨‹ä¸­å¼•å…¥ï¼Œå­å·¥ç¨‹åªéœ€`babel`è½¬è¯‘å³å¯

```js
import "core-js/stable";
import "regenerator-runtime/runtime";
```

æœ‰äº†`babel` è½¬è¯‘ï¼Œå†åŠ ä¸Š`core-js`çš„`Promiseã€WeakMap`ç­‰å«ç‰‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨`ES6+`è¯­æ³•äº†ï¼

é¦–å…ˆè¯·å…ˆç¡®å®šä½ çš„é¡¹ç›®æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼š

- è„šæ‰‹æ¶ ï¼ˆæœ¬æ–‡ä¼šä»¥ `vue-cli` ä¸ºä¾‹ï¼‰
- æ²¡æœ‰é€šè¿‡è„šæ‰‹æ¶ï¼Œä¸€ç‚¹ç‚¹æ‰‹æ’¸çš„ï¼ˆè¾›è‹¦äº†ğŸ¤£ï¼‰

## è„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®

å¦‚æœä½ æ˜¯é€šè¿‡ `vue-cli` é¡¹ç›®åˆ›å»ºçš„ï¼Œæ­å–œä½ ğŸ‰ï¼Œåªéœ€è¦å‡çº§è‡³æœ€æ–°`vue-cli`ï¼ˆå†…ç½®babel7ï¼‰ï¼Œå¹¶ä¸”å°†ä½ çš„babelé…ç½®æ–‡ä»¶ä¿®æ”¹æˆ `babel.config.js` ã€‚è¿™å°†ä¼šæŠŠ`node_mudules`ä¸­çš„jsä¹Ÿè¿›è¡Œè½¬è¯‘ï¼Œå¦‚æœä¸æƒ³è¯·åœ¨`babel-loader`é…ç½®ä¸­æ·»åŠ æ­£åˆ™

```js
// webpack config
rules:[
  {
    test: /\.js$/,
    exclude: /node_modules/,
    loader: 'babel-loader'
  }
]
```

## ä»é›¶æ‰‹æ’¸çš„é¡¹ç›®

æ­å–œä½ ï¼Œå¯ä»¥ä»å¤´é…ç½®ä¸€éå®Œæ•´çš„`Babel`é…ç½®ï¼Œè¿™æ ·å¯ä»¥åŠ æ·±ä½ å¯¹`babel`é…ç½®çš„å°è±¡ï¼ˆå¬èµ·æ¥çœŸä¸é”™å‘¢ğŸ¤ªï¼‰

### å®‰è£…

```js
npm i @babel/core @babel/preset-env babel-loader -D
```

å¦‚æœæ˜¯å…¥å£ï¼ˆportalï¼‰å·¥ç¨‹ï¼Œè¿˜éœ€

```js
npm i core-js regenerator-runtime -D
```

### é…ç½®babel

1. æ–°å»º `babel.config.js`
2. `copy` ä¸‹é¢çš„ä»£ç 

```js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          chrome: 5,
          ie: 9,
        },
        useBuiltIns: 'entry',// æŒ‰éœ€å¼•å…¥core-js,å¦‚æœæ˜¯å…¥å£å·¥ç¨‹éœ€è¦æ­¤é€‰é¡¹
      },
    ],
  ],
}
```

### é…ç½®webpack.config.js

```js
rules:[
  {
    test: /\.js$/,
    loader: 'babel-loader'
  }
]
```

### portalå·¥ç¨‹è¿˜éœ€å¼•å…¥core-js

```js
import "core-js/stable";
import "regenerator-runtime/runtime";
```

## å°¾è¯­

æ¬¢è¿äº¤æµæŠ€æœ¯ï¼Œå¾®ä¿¡å¦‚ä¸‹ï¼š  
<img src="http://114.55.254.51/img/wechat_info.png" width="150" height="150"/>  
å¦‚æœæœ¬æ–‡å¸®åŠ©åˆ°äº†ä½ ï¼Œæ˜¯å¦æ„¿æ„è¯·æˆ‘å–æ¯â˜•â“   &nbsp;&nbsp;  `æ˜¯` â—  
![wechatpay](http://10.2.38.78:8085/static/pay.621c092.png)  
